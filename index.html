<script>
  function fadeIn(audio, el) {
    audio.volume = 0;
    audio.play();
    el.classList.add('active');
    let vol = 0;
    const fade = setInterval(() => {
      if (vol < 1) {
        vol += 0.05; // speed of fade-in
        audio.volume = Math.min(vol, 1);
      } else {
        clearInterval(fade);
      }
    }, 100); // every 100ms
  }

  function fadeOut(audio, el) {
    let vol = audio.volume;
    const fade = setInterval(() => {
      if (vol > 0) {
        vol -= 0.05; // speed of fade-out
        audio.volume = Math.max(vol, 0);
      } else {
        clearInterval(fade);
        audio.pause();
        audio.currentTime = 0;
        el.classList.remove('active');
      }
    }, 100);
  }

  function toggleSound(id, el) {
    const audio = document.getElementById(id);

    if (audio.paused) {
      fadeIn(audio, el);
    } else {
      fadeOut(audio, el);
    }
  }

  function stopAll() {
    document.querySelectorAll('audio').forEach((a, i) => {
      const icon = document.querySelectorAll('.icon')[i];
      fadeOut(a, icon);
    });
  }
</script>
